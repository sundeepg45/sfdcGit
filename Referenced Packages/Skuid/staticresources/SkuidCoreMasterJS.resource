/*! Skuid Rockaway 8.11.0 02-06-2016 */
!function(a){var b=a.$,c=a.snippet,d=c.register,e=a.utils,f="skuid__DataSourceType__ui",g="skuid__DataSource__ui",h="salesforce",i=e.capitalizeFirst,j=function(c){var d=c.field,e=c.value,f=c.entries,g=c.onChange;"edit"===d.mode?d.element.html(a.ui.renderers.PICKLIST.edit({value:e,required:!0,onChange:function(a){d.model.updateRow(d.row,d.id,a,{initiatorId:d._GUID}),g&&c.onChange(a)},entries:f})):(b.each(f,function(){return e===this.value?(e=this.label,!1):void 0}),a.ui.fieldRenderers[d.metadata.displaytype][d.mode](d,e))},k=function(){var c={};return b.each(a.service.map(),function(a,b){var d=b.adapter?b.adapter.name:b.adapterName;d&&(c[d]||(c[d]=[]),c[d].push(b))}),c};d("skuid.core.haveMultipleActiveDataSources",function(){return e.size(a.service.map())>1}),d("skuid.core.actions.previewPage",function(){var a=arguments[0],b=c.get("skuid.builder.page.preview");b&&b({model:a.model,row:a.item?a.item.row:a.row})}),d("skuid.core.renderers.dataSourceType",function(){j({field:arguments[0],value:e.decodeHTML(arguments[1]),entries:b.map(k(),function(a,b){return"REST"!==b?{value:b,label:b}:void 0}).sort(function(a,b){return a.value===h?-1:i(a.label)>i(b.label)})})}),d("skuid.core.renderers.dataSource",function(){var a=k(),c=arguments[0],d=c.model.getFieldValue(c.row,f,!0)||Object.keys(a)[0];j({field:arguments[0],value:e.decodeHTML(arguments[1]),entries:b.map(a[d],function(a){var b=a.name;return{value:b,label:b===h?"Current Salesforce Org":b}}).sort(function(a,b){return a.value===h?-1:i(a.label)>i(b.label)})})}),d("skuid.core.snippets.newPageRenderStartingPoint",function(a){var c,d,e=a.updates&&a.updates.skuid__Type__c,f=a.model,g=a.row;e&&(c=f.getFieldValue(g,"skuid__Initial_State__c"),d=f.registeredFields,"Mobile"===e&&"masterpage"===c&&f.updateRow(g,{skuid__Initial_State__c:"none"}),b.each(d,function(){"skuid__Initial_State__c"===this.id&&this.render()}))}),d("skuid.core.snippets.newPageStartingPoint",function(c,d){if(c.options||(c.options={}),c.options.type="RADIO_BUTTONS",a.ui.fieldRenderers[c.metadata.displaytype][c.mode](c,d),c.options.type="CUSTOM","edit"===c.mode){var e=c.model,f=c.row,g=e.getFieldValue(f,"skuid__Type__c");if("Mobile"===g){var h=c.element.find("div.nx-radiowrapper");h.each(function(){var a=b(this),c=a.children('input[type="radio"]');"masterpage"===c.val()&&a.hide()})}}}),b(document.body).one("pageload",function(){var c=a.$M("pgs__NewPage"),i="skuid__Initial_State__c",j="skuid__Page_Template__c",l="skuid__Primary_Object__c",m="skuid__MasterPage__c",n="skuid__Page_XML__c",o='<skuidpage unsavedchangeswarning="yes" personalizationmode="server"';d("PrimaryObjectField",function(b){var c=b.model,d=b.row,e=k(),h=c.getFieldValue(d,l,!0);b.element.append(a.ui.renderers.ENTITY.edit({value:h,service:function(){var b=c.getFieldValue(d,f,!0)||Object.keys(e)[0],h=c.getFieldValue(d,g,!0);return h&&a.service.getService(h)||e[b][0]},onChange:function(a){c.updateRow(d,l,a,{initiatorId:b._GUID})}}))});var p=function(c){c||(c={});var d,k,p,q,r=c.model,s=c.row,t=r.getFieldValue(s,i,!0)||"none",u=r.getFieldValue(s,j,!0)||"tab-page",v=r.getFieldValue(s,l,!0)||"",w=r.getFieldValue(s,f,!0)||h,x=r.getFieldValue(s,g,!0)||h,y=a.service.getService(x),z=y.getCachedEntityMetadata(v),A=x===h&&w===h,B=r.getFieldValue(s,"skuid__Type__c",!0)||"Desktop",C=function(){w===h&&b.inArray(v,["Contact","Lead","User"])>-1?(p=["FirstName","LastName"],"Lead"===v&&p.push("Company")):(p=[],q=y.getNameField(v),q&&p.push(q))};if(""!==v&&"none"!==t)k=v.replace("__c","").replace(/_/g,""),"tab-page"===u?(C(),d="Mobile"===B?o+"><models>":o+' showsidebar="true" showheader="true" '+(A?'tabtooverride="'+v+'"':"")+"><models>",d+='<model id="'+k+'" limit="100" query="true" createrowifnonefound="false" adapter="'+w+'" service="'+x+'" sobject="'+v+'">',d+="<fields>",b.each(p,function(a,b){z.getField(b)&&(d+='<field id="'+b+'"/>')}),z.getField("CreatedDate")&&(d+='<field id="CreatedDate"/>'),d+="</fields>",d+="<conditions/></model></models><components>","Desktop"===B?(d+='<pagetitle model="'+k+'"><maintitle><template>{{Model.labelPlural}}</template></maintitle><subtitle><template>Home</template></subtitle><actions><action type="savecancel"/></actions></pagetitle>',d+='<skootable showconditions="true" showsavecancel="false" searchmethod="server" searchbox="true" showexportbuttons="false" pagesize="10"  createrecords="true" model="'+k+'" mode="read"><fields>',b.each(p,function(a,b){z.getField(b)&&(d+='<field id="'+b+'" allowordering="true"/>')}),z.getField("CreatedDate")&&(d+='<field id="CreatedDate" allowordering="true"/>'),d+='</fields><rowactions><action type="edit"/><action type="delete"/></rowactions><massactions usefirstitemasdefault="true"><action type="massupdate"/><action type="massdelete"/></massactions><views><view type="standard"/></views></skootable>'):"Mobile"===B&&(d+="<skuidmobile>",d+="<mobilepanels>",d+='<mobilepanel uniqueid="main" minwidth="400">',d+="<components>",d+='<mobiledeck showsavecancel="true" searchmethod="server" searchbox="true" tokenizesearch="true" createrecords="true" precision="6" minwidth="300" model="'+k+'" mode="read">',d+="<components>",b.each(p,function(a,b){z.getField(b)&&(d+='<mobilefield id="'+b+'"/>')}),z.getField("CreatedDate")&&(d+='<mobilefield id="CreatedDate"/>'),d+="</components>",d+="<title>{{Model.labelPlural}}</title>",d+="<cardtitle>",b.each(p,function(a,b){d+=(0!==a?" ":"")+"{{"+b+"}}"}),d+="</cardtitle>",d+="</mobiledeck>",d+="</components>",d+="</mobilepanel>",d+="</mobilepanels>",d+="<mobilenavs>",d+='<mobilenav uniqueid="header">',d+="<components>",d+='<mobilegrid precision="6" minwidth="50">',d+="<divisions>",d+='<division size="1">',d+="<components>",d+='<mobilebutton label="" style="nav" icon="fa-bars">',d+="<actions>",d+='<action type="setMainPanel" panel="main"/>',d+="</actions>",d+="</mobilebutton>",d+="</components>",d+="</division>",d+='<division size="4">',d+="<components>",d+="<mobiletitle>",d+="<contents>{{$Model."+k+".labelPlural}}</contents>",d+="</mobiletitle>",d+="</components>",d+="</division>",d+='<division size="1">',d+="<components>",d+='<mobilebutton label="" style="nav" icon="fa-th">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</mobilebutton>",d+="</components>",d+="</division>",d+="</divisions>",d+="</mobilegrid>",d+="</components>",d+="<interactions>",d+='<interaction type="doubletap">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</interaction>",d+='<interaction type="swipedown">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</interaction>",d+="</interactions>",d+="</mobilenav>",d+="</mobilenavs>",d+="</skuidmobile>"),d+="</components><resources><labels/><css/><javascript/></resources></skuidpage>"):"detail-page"===u?(C(),d="Mobile"===B?o+"><models>":o+' showsidebar="true" showheader="true" '+(A?'tabtooverride="'+v+'"':"")+"><models>",d+='<model id="'+k+'" limit="1" query="true" createrowifnonefound="false" adapter="'+w+'" service="'+x+'" sobject="'+v+'">',d+="<fields>",b.each(p,function(a,b){z.getField(b)&&(d+='<field id="'+b+'"/>')}),z.getField("CreatedDate")&&(d+='<field id="CreatedDate"/>'),d+="</fields>",d+='<conditions><condition type="param" enclosevalueinquotes="true" operator="=" field="Id" value="id"/></conditions>',d+="</model></models><components>","Desktop"===B?(d+='<pagetitle model="'+k+'"><maintitle><template>',b.each(p,function(a,b){z.getField(b)&&(d+=(0!==a?" ":"")+"{{"+b+"}}")}),d+="</template></maintitle><subtitle><template>{{Model.label}}</template></subtitle><actions>"+(A?'<action type="delete"/><action type="clone"/><action type="share"/>':"")+'<action type="savecancel" window="self"/></actions></pagetitle>',d+='<basicfieldeditor showsavecancel="false" showheader="true" model="'+k+'" mode="read"><columns>',d+='<column width="50%"><sections>',d+='<section title="Basics"><fields>',b.each(p,function(a,b){z.getField(b)&&(d+='<field id="'+b+'"/>')}),d+="</fields></section>",d+="</sections></column>",d+='<column width="50%"><sections>',d+='<section title="System Info"><fields>'+(z.getField("CreatedDate")?'<field id="CreatedDate"/>':"")+"</fields></section>",d+="</sections></column>",d+="</columns></basicfieldeditor>"):"Mobile"===B&&(d+="<skuidmobile>",d+="<mobilepanels>",d+='<mobilepanel uniqueid="main" minwidth="400">',d+="<components>",d+='<mobiledeck showsavecancel="true" searchmethod="server" searchbox="false" tokenizesearch="false" createrecords="false" precision="1" minwidth="200" model="'+k+'" mode="read">',d+="<components>",b.each(p,function(a,b){z.getField(b)&&(d+='<mobilefield id="'+b+'"/>')}),z.getField("CreatedDate")&&(d+='<mobilefield id="CreatedDate"/>'),d+="</components>",d+="<title>{{Model.label}}</title>",d+="<cardtitle>",b.each(p,function(a,b){z.getField(b)&&(d+=(0!==a?" ":"")+"{{"+b+"}}")}),d+="</cardtitle>",d+="</mobiledeck>",d+="</components>",d+="</mobilepanel>",d+="</mobilepanels>",d+="<mobilenavs>",d+='<mobilenav uniqueid="header">',d+="<components>",d+='<mobilegrid precision="6" minwidth="50">',d+="<divisions>",d+='<division size="1">',d+="<components>",d+='<mobilebutton label="" style="nav" icon="fa-bars">',d+="<interactions>",d+='<interaction type="tap">',d+="<actions>",d+='<action type="setMainPanel" panel="main"/>',d+="</actions>",d+="</interaction>",d+="</interactions>",d+="</mobilebutton>",d+="</components>",d+="</division>",d+='<division size="4">',d+="<components>",d+="<mobiletitle>",d+="<contents>{{$Model."+k+".label}}</contents>",d+="</mobiletitle>",d+="</components>",d+="</division>",d+='<division size="1">',d+="<components>",d+='<mobilebutton label="" style="nav" icon="fa-th">',d+="<interactions>",d+='<interaction type="tap">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</interaction>",d+="</interactions>",d+="</mobilebutton>",d+="</components>",d+="</division>",d+="</divisions>",d+="</mobilegrid>",d+="</components>",d+="<interactions>",d+='<interaction type="doubletap">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</interaction>",d+='<interaction type="swipedown">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</interaction>",d+="</interactions>",d+="</mobilenav>",d+="</mobilenavs>",d+="</skuidmobile>"),d+="</components><resources><labels/><css/><javascript/></resources></skuidpage>"):"new-page"===u&&(C(),d="Mobile"===B?o+"><models>":o+' showsidebar="true" showheader="true" '+(A?'tabtooverride="'+v+'"':"")+"><models>",d+='<model id="'+k+'" limit="1" query="false" createrowifnonefound="true" adapter="'+w+'" service="'+x+'" sobject="'+v+'">',d+="<fields>",b.each(p,function(a,b){z.getField(b)&&(d+='<field id="'+b+'"/>')}),d+="</fields>",d+="</model></models><components>","Desktop"===B?(d+='<pagetitle model="'+k+'"><maintitle><template>New {{Model.label}}</template></maintitle><subtitle><template>{{Model.labelPlural}}</template></subtitle><actions><action type="savecancel" '+(A?'afterCancel="/{{Model.KeyPrefix}}/o" ':"")+(A?'afterSave="/{{Id}}" ':"")+'rollbackonanyerror="true"/></actions></pagetitle>',d+='<basicfieldeditor showsavecancel="false" showheader="true" model="'+k+'" mode="edit"><columns>',d+='<column width="50%"><sections>',d+='<section title="Basics"><fields>',b.each(p,function(a,b){z.getField(b)&&(d+=(0!==a?" ":"")+'<field id="'+b+'"/>')}),d+="</fields></section>",d+="</sections></column>",d+='<column width="50%"><sections>',d+='<section title="Additional Info"><fields/></section>',d+="</sections></column>",d+="</columns></basicfieldeditor>"):"Mobile"===B&&(d+="<skuidmobile>",d+="<mobilepanels>",d+='<mobilepanel uniqueid="main" minwidth="400">',d+="<components>",d+='<mobiledeck showsavecancel="true" searchmethod="client" searchbox="false" tokenizesearch="false" createrecords="true" precision="1" minwidth="200" model="'+k+'" mode="edit">',d+="<components>",b.each(p,function(a,b){z.getField(b)&&(d+='<mobilefield id="'+b+'"/>')}),d+="</components>",d+="<title>{{Model.label}}</title>",d+="<cardtitle>",b.each(p,function(a,b){z.getField(b)&&(d+=(0!==a?" ":"")+"{{"+b+"}}")}),d+="</cardtitle>",d+="</mobiledeck>",d+="</components>",d+="</mobilepanel>",d+="</mobilepanels>",d+="<mobilenavs>",d+='<mobilenav uniqueid="header">',d+="<components>",d+='<mobilegrid precision="6" minwidth="50">',d+="<divisions>",d+='<division size="1">',d+="<components>",d+='<mobilebutton label="" style="nav" icon="fa-bars">',d+="<interactions>",d+='<interaction type="tap">',d+="<actions>",d+='<action type="setMainPanel" panel="main"/>',d+="</actions>",d+="</interaction>",d+="</interactions>",d+="</mobilebutton>",d+="</components>",d+="</division>",d+='<division size="4">',d+="<components>",d+="<mobiletitle>",d+="<contents>New {{$Model."+k+".label}}</contents>",d+="</mobiletitle>",d+="</components>",d+="</division>",d+='<division size="1">',d+="<components>",d+='<mobilebutton label="" style="nav" icon="fa-th">',d+="<interactions>",d+='<interaction type="tap">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</interaction>",d+="</interactions>",d+="</mobilebutton>",d+="</components>",d+="</division>",d+="</divisions>",d+="</mobilegrid>",d+="</components>",d+="<interactions>",d+='<interaction type="doubletap">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</interaction>",d+='<interaction type="swipedown">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</interaction>",d+="</interactions>",d+="</mobilenav>",d+="</mobilenavs>",d+="</skuidmobile>"),d+="</components><resources><labels/><css/><javascript/></resources></skuidpage>");else if("masterpage"===t&&""!==m)d='<skuidpage unsavedchangeswarning="yes"><models/><pageregioncontents/><components/><resources><labels/><css/><javascript/></resources></skuidpage>';else if("from-xml"===t){var D=r.getFieldValue(s,n,!0);return void(D&&e.writeXmlToPageLayoutFields(D,r,s))}d||(d="Mobile"===B?o+"><models/><components><skuidmobile><mobilepanels/><mobilenavs/></skuidmobile></components><resources><labels/><javascript/><css/></resources></skuidpage>":o+' showsidebar="true" showheader="true"><models/><components/><resources><labels/><javascript/><css/></resources></skuidpage>'),e.writeXmlToPageLayoutFields(d,r,s)};d("skuid.pageList.buildLayoutFromTemplate",function(){p({model:c,row:arguments[0].row})})})}(skuid);